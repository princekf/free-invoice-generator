<div class="layout-container">

  <mat-card class="filter-panel">
    <mat-form-field appearance="fill" class="filter-input">
      <mat-label>Search by name</mat-label>
      <input matInput [(ngModel)]="filterText" (ngModelChange)="onFilterInput($event)" />
    </mat-form-field>

    <h4>Tax Option</h4>
    <div *ngFor="let tax of taxOptions">
      <mat-checkbox [checked]="selectedTaxTypes.includes(tax)" (change)="toggleTaxType(tax)">
        {{ tax }}
      </mat-checkbox>
    </div>

    <h4>Color Option</h4>
    <div *ngFor="let color of colorOptions">
      <mat-checkbox [checked]="selectedColors.includes(color)" (change)="toggleColor(color)">
        {{ color }}
      </mat-checkbox>
    </div>

    <a class="clear-filters-link" (click)="clearFilters()">Clear Filters</a>
  </mat-card>

  <div class="content-area">

    <div class="iframe-grid">
      <div *ngFor="let item of templates" class="template-container">

        <!-- âœ… Template Header: Name on LEFT, buttons on RIGHT -->
        <div class="template-header">
          <span class="template-name">{{ item.name }}</span>

          <div class="template-actions">
            <button mat-icon-button class="icon-button" matTooltip="Download PDF" (click)="downloadTemplateAsPDF(item)">
              <mat-icon>picture_as_pdf</mat-icon>
            </button>

            <button mat-icon-button class="icon-button" matTooltip="Download (was print)" (click)="downloadTemplateAsHTML(item)">
              <mat-icon>download</mat-icon>
            </button>

            <button mat-icon-button class="icon-button" matTooltip="Preview" (click)="previewTemplate(item)">
              <mat-icon>visibility</mat-icon>
            </button>
          </div>


        </div>

        <div class="invoice-preview-container">
          <iframe [attr.srcdoc]="item.safeHTML" [attr.title]="item.name" [attr.aria-label]="'Preview of ' + item.name"
            width="100%" height="600" frameborder="0" style="border: 1px solid #ccc; border-radius: 8px;">
          </iframe>
        </div>
      </div>
    </div>

    <mat-paginator [length]="totalItems" [pageSize]="itemsPerPage" [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons
      color="primary">
    </mat-paginator>

  </div>
</div>